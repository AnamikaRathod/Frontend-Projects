<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrome Q-Gen - AI-Powered Learning Navigator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
            --bg-card: rgba(255, 255, 255, 0.05);
            --bg-input: rgba(0, 0, 0, 0.3);
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --border-color: rgba(255, 255, 255, 0.1);
            --accent-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --accent-color: #667eea;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        body.light-mode {
            --bg-primary: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --bg-card: rgba(255, 255, 255, 0.9);
            --bg-input: rgba(255, 255, 255, 0.8);
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --border-color: rgba(0, 0, 0, 0.1);
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
            transition: all 0.5s ease;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated Background Network */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.9;
        }

        .bg-animation canvas {
            width: 100%;
            height: 100%;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Theme Toggle */
        .theme-toggle-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 30px;
            border: 1px solid var(--border-color);
            box-shadow: 0 5px 20px var(--shadow);
        }

        .theme-toggle {
            position: relative;
            width: 60px;
            height: 30px;
            background: var(--bg-input);
            border-radius: 30px;
            cursor: pointer;
            border: 2px solid var(--border-color);
            transition: all 0.3s;
        }

        .theme-toggle::before {
            content: 'üåô';
            position: absolute;
            top: 50%;
            left: 3px;
            transform: translateY(-50%);
            width: 22px;
            height: 22px;
            background: var(--accent-gradient);
            border-radius: 50%;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        body.light-mode .theme-toggle::before {
            content: '‚òÄÔ∏è';
            left: calc(100% - 25px);
        }

        .theme-label {
            font-size: 0.9em;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Logo Background */
        .logo-bg {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 180px;
            opacity: 0.08;
            z-index: 0;
            pointer-events: none;
            filter: drop-shadow(0 0 30px rgba(102, 126, 234, 0.3));
        }

        body.light-mode .logo-bg {
            opacity: 0.05;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 40px var(--shadow);
        }

        .header-logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .header-logo {
            width: 80px;
            height: auto;
            filter: drop-shadow(0 5px 15px rgba(102, 126, 234, 0.4));
        }

        .header h1 {
            font-size: 3em;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
            text-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.2em;
            margin-top: 10px;
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            .theme-toggle-container {
                top: 10px;
                right: 10px;
                padding: 8px 15px;
            }
            .logo-bg {
                width: 120px;
                bottom: 20px;
                right: 20px;
            }
        }

        /* Input Section */
        .input-section {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 40px var(--shadow);
        }

        .input-section h2 {
            color: var(--accent-color);
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            background: var(--bg-input);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        select, input[type="number"] {
            width: 100%;
            padding: 12px;
            background: var(--bg-input);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        select:focus, input[type="number"]:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            min-width: 150px;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: var(--accent-gradient);
            color: white;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3); 
              background: linear-gradient(270deg, #667eea, #764ba2, #00c6ff, #ff6ec4);
    background-size: 600% 600%;
    animation: gradientMove 20s ease infinite;
    color: white;
    box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
    transition: transform 0.3s;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: var(--bg-input);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--bg-card);
            border-color: var(--accent-color);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
.btn-primary:hover {
    transform: scale(1.05);
}

/* Gradient Animation */
@keyframes gradientMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}
        /* Flashcards Section */
        .flashcards-section {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            max-height: 600px;
            overflow-y: auto;
            box-shadow: 0 10px 40px var(--shadow);
        }

        .flashcards-section h2 {
            color: #764ba2;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .flashcard {
            background: var(--bg-input);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .flashcard:hover {
            border-color: var(--accent-color);
            transform: translateX(5px);
            box-shadow: 0 5px 20px var(--shadow);
        }

        .flashcard.flipped {
            background: rgba(102, 126, 234, 0.15);
            border-color: var(--accent-color);
        }

        .flashcard-number {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent-gradient);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        .logo img {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            /* border: 2px solid  rgba(102, 126, 234, 0.3); */
        }
        .question {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: 10px;
            padding-right: 50px;
        }

        .answer {
            color: var(--text-secondary);
            line-height: 1.6;
            display: none;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--border-color);
        }

        .flashcard.flipped .answer {
            display: block;
        }

        .flip-hint {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin-top: 10px;
            font-style: italic;
            opacity: 0.7;
        }

        .flashcard.flipped .flip-hint {
            display: none;
        }

        /* Stats Section */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            text-align: center;
            box-shadow: 0 5px 20px var(--shadow);
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--border-color);
            border-top-color: var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state svg {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-input);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-gradient);
            border-radius: 5px;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--accent-gradient);
            color: rgb(255, 255, 255);
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px var(--shadow);
            display: none;
            animation: slideIn 0.3s ease;
            z-index: 1000;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .export-section {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .export-btn {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            background: var(--bg-input);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95em;
        }

        .export-btn:hover {
            background: var(--bg-card);
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Background Animation -->
    <div class="bg-animation" id="bgAnimation"></div>

    <!-- Background Logo -->
    <svg class="logo-bg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
            </linearGradient>
        </defs>
        <circle cx="100" cy="100" r="90" fill="url(#logoGradient)" opacity="0.3"/>
        <text x="100" y="120" font-size="80" font-weight="bold" text-anchor="middle" fill="url(#logoGradient)">Q</text>
        <path d="M 60 60 Q 100 30, 140 60" stroke="url(#logoGradient)" stroke-width="4" fill="none"/>
        <circle cx="70" cy="70" r="8" fill="url(#logoGradient)"/>
        <circle cx="130" cy="70" r="8" fill="url(#logoGradient)"/>
    </svg>

    <!-- Theme Toggle -->
    <div class="theme-toggle-container">
        <span class="theme-label">Theme</span>
        <div class="theme-toggle" onclick="toggleTheme()"></div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-logo-container">
                <svg class="header-logo" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="headerLogoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <div class="logo">
                        <img src="logo.png" alt="Q-Gen-logo">
                    </div>
                                  </svg>
                <h1>Chrome Q-Gen</h1>
            </div>
            <p>AI-Powered Learning Navigator | Transform Notes into Smart Flashcards</p>
        </div>

        <!-- Stats -->
        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="totalCards">0</div>
                <div class="stat-label">Total Flashcards</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="studySessions">0</div>
                <div class="stat-label">Study Sessions</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalWords">0</div>
                <div class="stat-label">Words Processed</div>
            </div>
        </div>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Input Section -->
            <div class="input-section">
                <h2>üìì Input Your Notes</h2>
                
                <div class="input-group">
                    <label for="notesInput">Paste your study notes here:</label>
                    <textarea id="notesInput" placeholder="Enter your study material, lecture notes, or any text you want to convert into flashcards...

Example:
JavaScript is a programming language that is one of the core technologies of the World Wide Web. It enables interactive web pages and is an essential part of web applications. JavaScript is a prototype-based, multi-paradigm, single-threaded, dynamic language, supporting object-oriented, imperative, and declarative programming styles."></textarea>
                </div>

                <div class="options-grid">
                    <div class="input-group">
                        <label for="difficulty">Difficulty Level:</label>
                        <select id="difficulty">
                            <option value="easy">Easy</option>
                            <option value="medium" selected>Medium</option>
                            <option value="hard">Hard</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="numCards">Number of Cards:</label>
                        <input type="number" id="numCards" value="5" min="1" max="20">
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" id="generateBtn">
                        <span>‚ú®</span> Generate Flashcards
                    </button>
                    <button class="btn btn-secondary" id="clearBtn">
                        <span>üóëÔ∏è</span> Clear All
                    </button>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>AI is analyzing your notes and generating flashcards...</p>
                </div>
            </div>

            <!-- Flashcards Section -->
            <div class="flashcards-section">
                <h2>üìÑ Your Flashcards</h2>
                
                <div id="flashcardsContainer">
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                        <p>No flashcards yet!</p>
                        <p>Enter your notes and click "Generate Flashcards" to get started.</p>
                    </div>
                </div>

                <div class="export-section" id="exportSection" style="display: none;">
                    <button class="export-btn" onclick="exportAsJSON()">üìÑ Export JSON</button>
                    <button class="export-btn" onclick="exportAsText()">üìù Export Text</button>
                    <button class="export-btn" onclick="printFlashcards()">üñ®Ô∏è Print</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // State Management
        let flashcards = [];
        let stats = {
            totalCards: 0,
            studySessions: 0,
            totalWords: 0
        };

        // Theme Management
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const theme = document.body.classList.contains('light-mode') ? 'light' : 'dark';
            localStorage.setItem('qgen_theme', theme);
            showToast(theme === 'light' ? '‚òÄÔ∏è Light mode activated!' : 'üåô Dark mode activated!');
        }

        // Animated Background
        function initBackground() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const container = document.getElementById('bgAnimation');
            container.appendChild(canvas);

            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            const particleCount = 50;
            const isDark = !document.body.classList.contains('light-mode');
            
            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.vx = (Math.random() - 0.5) * 0.5;
                    this.vy = (Math.random() - 0.5) * 0.5;
                    this.radius = Math.random() * 2 + 1;
                }

                update() {
                    this.x += this.vx;
                    this.y += this.vy;

                    if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                    if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
                }

                draw() {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                    ctx.fillStyle = isDark ? 'rgba(102, 126, 234, 0.5)' : 'rgba(102, 126, 234, 0.3)';
                    ctx.fill();
                }
            }

            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                particles.forEach(particle => {
                    particle.update();
                    particle.draw();
                });

                particles.forEach((p1, i) => {
                    particles.slice(i + 1).forEach(p2 => {
                        const dx = p1.x - p2.x;
                        const dy = p1.y - p2.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);

                        if (distance < 100) {
                            ctx.beginPath();
                            ctx.moveTo(p1.x, p1.y);
                            ctx.lineTo(p2.x, p2.y);
                            ctx.strokeStyle = isDark ? `rgba(102, 126, 234, ${0.2 - distance / 500})` : `rgba(102, 126, 234, ${0.1 - distance / 1000})`;
                            ctx.stroke();
                        }
                    });
                });

                requestAnimationFrame(animate);
            }

            animate();

            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        // Load saved data and theme
        window.addEventListener('load', () => {
            const savedTheme = localStorage.getItem('qgen_theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
            }
            loadFromStorage();
            updateStats();
            initBackground();
        });

        // Generate Flashcards
        document.getElementById('generateBtn').addEventListener('click', async () => {
            const notesInput = document.getElementById('notesInput').value.trim();
            
            if (!notesInput) {
                showToast('‚ö†Ô∏è Please enter some notes first!');
                return;
            }

            const difficulty = document.getElementById('difficulty').value;
            const numCards = parseInt(document.getElementById('numCards').value);

            document.getElementById('loading').style.display = 'block';
            document.getElementById('generateBtn').disabled = true;

            await new Promise(resolve => setTimeout(resolve, 2000));

            flashcards = generateFlashcardsFromText(notesInput, difficulty, numCards);
            
            stats.totalCards += flashcards.length;
            stats.studySessions++;
            stats.totalWords += notesInput.split(/\s+/).length;

            saveToStorage();
            displayFlashcards();
            updateStats();

            document.getElementById('loading').style.display = 'none';
            document.getElementById('generateBtn').disabled = false;

            showToast(`‚úÖ Generated ${flashcards.length} flashcards successfully!`);
        });

        function generateFlashcardsFromText(text, difficulty, numCards) {
            const sentences = text.match(/[^.!?]+[.!?]+/g) || [text];
            const cards = [];
            const words = text.toLowerCase().split(/\s+/);
            const keyTerms = words.filter(word => word.length > 5).slice(0, numCards);

            for (let i = 0; i < Math.min(numCards, sentences.length); i++) {
                const sentence = sentences[i].trim();
                let question, answer;
                
                if (difficulty === 'easy') {
                    question = `What is ${keyTerms[i] || 'the main concept'}?`;
                    answer = sentence;
                } else if (difficulty === 'medium') {
                    question = `Explain ${keyTerms[i] || 'this concept'} in detail.`;
                    answer = sentence;
                } else {
                    question = `How would you apply ${keyTerms[i] || 'this concept'} in a real scenario?`;
                    answer = sentence + ' (Apply critical thinking to elaborate further)';
                }

                cards.push({ question, answer, id: Date.now() + i });
            }

            if (text.toLowerCase().includes('javascript')) {
                cards.push({
                    question: 'What are the key features of JavaScript?',
                    answer: 'JavaScript is prototype-based, multi-paradigm, single-threaded, and supports object-oriented, imperative, and declarative styles.',
                    id: Date.now() + 1000
                });
            }

            return cards.slice(0, numCards);
        }

        function displayFlashcards() {
            const container = document.getElementById('flashcardsContainer');
            
            if (flashcards.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                        <p>No flashcards yet!</p>
                        <p>Enter your notes and click "Generate Flashcards" to get started.</p>
                    </div>
                `;
                document.getElementById('exportSection').style.display = 'none';
                return;
            }

            container.innerHTML = flashcards.map((card, index) => `
                <div class="flashcard" onclick="flipCard(${index})" id="card-${index}">
                    <div class="flashcard-number">#${index + 1}</div>
                    <div class="question">‚ùì ${card.question}</div>
                    <div class="answer">üí° ${card.answer}</div>
                    <div class="flip-hint">üëÜ Click to reveal answer</div>
                </div>
            `).join('');

            document.getElementById('exportSection').style.display = 'flex';
        }

        function flipCard(index) {
            const card = document.getElementById(`card-${index}`);
            card.classList.toggle('flipped');
        }

        document.getElementById('clearBtn').addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all flashcards?')) {
                flashcards = [];
                document.getElementById('notesInput').value = '';
                displayFlashcards();
                saveToStorage();
                showToast('üóëÔ∏è All flashcards cleared!');
            }
        });

        function exportAsJSON() {
            const dataStr = JSON.stringify(flashcards, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'flashcards.json';
            link.click();
            showToast('üìÑ Exported as JSON!');
        }

        function exportAsText() {
            const text = flashcards.map((card, i) => 
                `Q${i + 1}: ${card.question}\nA${i + 1}: ${card.answer}\n\n`
            ).join('');
            const dataBlob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'flashcards.txt';
            link.click();
            showToast('üìù Exported as Text!');
        }

        function printFlashcards() {
            window.print();
            showToast('üñ®Ô∏è Opening print dialog...');
        }

        function saveToStorage() {
            localStorage.setItem('qgen_flashcards', JSON.stringify(flashcards));
            localStorage.setItem('qgen_stats', JSON.stringify(stats));
        }

        function loadFromStorage() {
            const saved = localStorage.getItem('qgen_flashcards');
            const savedStats = localStorage.getItem('qgen_stats');
            
            if (saved) {
                flashcards = JSON.parse(saved);
                displayFlashcards();
            }
            
            if (savedStats) {
                stats = JSON.parse(savedStats);
            }
        }

        function updateStats() {
            document.getElementById('totalCards').textContent = stats.totalCards;
            document.getElementById('studySessions').textContent = stats.studySessions;
            document.getElementById('totalWords').textContent = stats.totalWords;
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.display = 'block';
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>
